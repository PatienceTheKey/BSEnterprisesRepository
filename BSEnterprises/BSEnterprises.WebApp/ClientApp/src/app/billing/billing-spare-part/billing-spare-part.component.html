<br>
<button pButton type="button" [routerLink]="['../']" label="Back To List"></button>

<br />
<br />

<form novalidate [formGroup]="billingSparePartForm" (ngSubmit)="saveBillingSparePart()">
    <p-fieldset legend="{{pageTitle}}">
      
    
     

     <br />
     <div class="ui-g">
       <p-fieldset legend="Invoice Items">
        <p-table [value]="billingSparePartItems.value">
          <ng-template pTemplate="header">
          <tr pResizableColumn>
              <th style="width:5%">S.No</th>
              <th style="width:12%">Item</th>
             <th style="width:12%">Quantity</th>
              <th style="width:12%">Price</th>
              <th style="width:10%">Discount </th>
              <th style="width:12%">HSN Code</th>
              <th style="width:12%">Taxable Value</th>
              <th style="width:12%">Cgst</th>
              <th style="width:11%">Sgst</th>
              <th style="width:11%">Igst</th>
              <th style="width:11%">Amount</th>
          </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
            <tr class="ui-resizable-column">
              <td>{{rowIndex+1}}</td>
              <td>{{getSpartPartName(item.productId)}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.rate}}</td>
              <td>{{item.discount}}</td>
              <td>{{item.hsnCode}}</td>
              <td>{{item.taxableValue | number: '1.2-2'}}</td>
              <td>{{item.cgstAmount | number: '1.2-2'}}</td> 
              <td>{{item.sgstAmount | number: '1.2-2'}}</td> 
              <td>{{item.igstAmount | number: '1.2-2'}}</td>
              <td>{{item.total | number: '1.2-2'}}</td>
              <td><button pButton type="button" icon="fa fa-fw fa-trash" (click)="removeItem(rowIndex)"></button></td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
            <td></td>
            <td>
                <p-dropdown [options]="sparePartSelectList" placeholder="Select A Product"
                [style]="{'width':'100%'}" filter="true" (onChange)="getProductPriceAndHsn(pId,rate,hsnCode)" #pId>
                <ng-template let-option pTemplate="item">
                <div translate>{{option.label}}</div>
                </ng-template>
                </p-dropdown>
            </td>
            <td>
              <input pInputText id="quantity" placeholder="quantity" style="width:100%" onlyNumber #quantity>
            </td>
            <td>
                <input pInputText id="rate" placeholder="price" style="width:100%" onlyNumber #rate>
            </td>
            <td>
                <input pInputText id="discount" placeholder="Discount %" style="width:100%" onlyNumber #dis>
            </td>
            <td>
                <input pInputText id="hsnCode" placeholder="Discount %" style="width:100%" onlyNumber #hsnCode>
            </td>
            <td>
              <button pButton type="button" (click)="addBillingSparePartItems(pId,quantity,dis,hsnCode,rate)" icon="fa fa-fw fa-plus"></button>
            </td>
          </tr>
          </ng-template>
      
      </p-table>
             <br>
       <div class="ui-g-4 ui-g-offset-5">
        <button pButton type="submit" label="Save and Next" class="ui-button-success"></button>
        
      </div>
      </p-fieldset>
     </div>
</p-fieldset>
<!-- <pre>{{orderForm.value | json}}</pre> -->
</form>

